---
title: "platetools"
author: "Martin"
date: "3/24/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(viridis)
library(dplyr)
```

```{r}

df_sp <- mpxtractor::read_spectramax_data(file = "../inst/extdata/spectraMax_1stplate.txt")
to_growth <- df_sp[,-3]
to_plot <- to_growth[1:481,]

grow <- tidyr::spread(to_growth, Wells, Measurement )
test <- grow[1:5,]
test
```

```{r}
test$Time_HH <- as.numeric(gsub("([^:]+).*", "\\1", test$`Time(hh:mm:ss)`)) + 
    
    as.numeric(gsub(".*:([0-9]{2}:+).*", "\\1", test$`Time(hh:mm:ss)`))/60

grow %>% dplyr::select(Time_HH, everything())

```

```{r}
platetools::raw_map(data = df_zero$Measurement,
        well = df_zero$Wells,
        plate = 384) +
    ggtitle("Example 384-well plate spectraMax time = 0:00") +
    theme_dark() +
    scale_fill_viridis()

```
