---
title: "Data wrangling functions"
author: "Martin Banchero"
date: '`r Sys.Date()`'
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{wrangling_and_layout_functions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
<style>
body {
text-align: justify}
</style>

```{r, include = FALSE}
library(mipledxtractor)
library(kableExtra)
knitr::opts_chunk$set(collapse = TRUE,comment = "#>")
```

# Overview
The `mpxtractor` contain one function for each type of micro plate reader machine. Each  of this functions are disgn to wrangle the raw data produced for this machines, this are: *read_spectramax_data()*, *read_multiscango_data()* and *read_fluorstar_data()*. In addition to this the function *read_multiple_files()* is used to combine more than one output file into one tidy data frame. 
To simplify the number of tasks that the user have to apply before load the
data in R, all this wrangling functions receive a file with .txt extension. This allows
to  avoid different issues realted to file formats, like .csv, .xlsx or versions. This is simplified by using only .txt files.

In addition to data wrangling functions, `mpxtractor` provide functions to deal with
layout files like *read_layout_file()* and *combine_data_with_layout()* which generate a tidy data frame that combine the output of one wrangling function with the layout files.


## 1. Wrangling functions
In this section is desccribed each of the wrangling functions with one example using
test data.
 
### 1.1 read_spectramax_data()
This function is specific to read output files (.txt) produced by spectraMax readers.
Recive one raw file and generate a tibble dataframe.
The file is the path to a proper .txt file formatted by the spectraMax machine.
The returned tibble data frame show four columns. The first column is
"Wells" this containe the names for each well (A01, A02..). The second column
represent "Time" at wich the measurements were done, the format is in hh:mm:ss.
The third column is "Temperature", this is the temperature at which the
experiment was performed. The fourth column contain the measured values.

Below is shown a toy example about how to use this function. Note that measurement
represent the values of OD600 in this case.

```{r}
file_path <- system.file("extdata", "test_spectramax_data_1.txt", package = "mpxtractor")

data_spectramax <- mpxtractor::read_spectramax_data(file = file_path)

head(data_spectramax)
```

### 1.2 read_multiscango_data()
This function is specific to read output files (.txt) produced by multiscanGO readers.
Recive one raw file and generate a tibble dataframe.
The file is the path to a proper .txt file formatted by the multiscanGO machine.
The returned tibble data frame show four columns. The first column is
"Wells" this contain the names for each well (A01, A02..). The second column
represent "Reading" at which the measurements were done, The third column is "Measurement", this is the value measured for each "Reading".

Below is shown a toy example about how to use this function.

```{r}
file_path <- system.file("extdata", "test_multiscango_data_1.txt", package = "mpxtractor")
data_multiscan <- mpxtractor::read_multiscango_data(file = file_path)
head(data_multiscan)
```



### 1.3 read_fluorstar_data()

```{r}
file_path <- system.file("extdata", "test_fluorstar_fluorescence_data.txt", package = "mpxtractor")
data_fluorstar <- mpxtractor::read_fluorstar_data(file = file_path)
head(data_fluorstar)

```


### 1.4 read_multiple_files()

```{r}
file_path <- system.file("extdata", 
                         c("test_spectramax_data_1.txt","test_spectramax_data_2.tx"), 
                         package = "mpxtractor")

data_multiple_spectramax <- mpxtractor::read_multiple_data_files(
                                                      reader_type = "spectramax",
                                                      filesname = file_path)
head(data_multiple_spectramax)
tail(data_multiple_spectramax)
```


```{r}
tail(data_multiple_spectramax)
```

## 2. Functions to process layout files


### 2.1 read_layout_files()
```{r}


```

### 2.2 combine_data_with_layout()
```{r}

```




