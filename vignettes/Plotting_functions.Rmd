---
title: "Plotting functions of `mpxtractor` package"
author: "Martin Banchero"
date: '`r Sys.Date()`'
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Read layout files in `mpxtractor`}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
<style>
body {
text-align: justify}
</style>

```{r, include = FALSE}
library(mipledxtractor)
knitr::opts_chunk$set(fig.width = 7.2, fig.height = 5 ,collapse = TRUE, 
                      comment = "#>")
```

### Overview
This section explains two functions that work over the layout files. The first 
function `read_layout_files()` of `mpxtractor` described is to add the layout
files to the tidy data obtained by one of the main functions, this can be seen in `main_functions_mpxtractor` vignettes. The second function is `plot_layout_file()`
and is used to plot the layout file as microplate.


### 1. read_layout_files()
#### 1.1 Generate data argument
First the tibble generated by one of the main functions is needed. This is a 
key step because *read_layout_file()* take as argument the measured data. 
Then the function add the layout to file as new columns.

```{r}
file_path_spec_data <- system.file("extdata",
                                   "spectraMax_1stplate.txt", 
                                   package = "mpxtractor")
data_spectramax <- mpxtractor::read_spectramax_data(file = file_path_spec_data)
head(data_spectramax)
```

#### 1.2 Explicit arguments
The function `read_layout_file()` takes another arguments beside the data. The 
type of machine where the data is produced, the *reader_type* argument and the 
files. This can be one file or multiple files.

```{r}
file_path_layout <- system.file("extdata", 
                                "spectraMax_layout_plate1.csv", 
                                package = "mpxtractor")

# Data is store as a tibble
data_layout <- mpxtractor::read_layout_files(data_spectramax, 
                                             reader_type = "spectramax",
                                             layout_files = file_path_layout)
head(data_layout)
```

### 2. plot_layout_file()
#### 2.1 Function arguments 
For this function is the layout file, which format is the same that the one used 
by the function `read_layout_files()`. The argument var_shape and var_colour 
represents the variables to plot. In this case is recommended to use the variable
with less levels as shape and the one with more levels as colour.
This can be seen as an example below. The last optional argument is the title of 
the plot.

```{r fig.cap = "**Figure 1: Output of the plot_lyout_file function.**"}
file_path_layout <- system.file("extdata",
                                "fluorstar_test_layout.csv", 
                                package = "mpxtractor")


plot_layout <- mpxtractor::plot_lyout_file(file = file_path_layout, 
                                           var_shape = "Basic" ,
                                           var_colour = "Medium", 
                                           name_plate_layout = "My experiment microplate")

# Microplate plot
plot_layout
```
  
